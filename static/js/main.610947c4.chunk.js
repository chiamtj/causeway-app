(this["webpackJsonpcauseway-app"]=this["webpackJsonpcauseway-app"]||[]).push([[0],{28:function(t,e,a){},48:function(t,e,a){},50:function(t,e,a){"use strict";a.r(e);var n=a(2),s=a.n(n),c=a(17),i=a.n(c),r=(a(28),a(8)),o=a.n(r),h=a(6),m=a(18),l=a(19),u=a(20),j=a(3),g=a(23),d=a(22),p=a(21),b=a.n(p).a.create({baseURL:"https://api.data.gov.sg/v1/transport/traffic-images"}),f=(a(48),a(0)),O=function(t){Object(g.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(l.a)(this,a),(t=e.call(this)).fetchLatestImage=t.fetchLatestImage.bind(Object(j.a)(t)),t.filterImages=t.filterImages.bind(Object(j.a)(t)),t.state={cameraNo:"2702",retImage:"",timeStamp:""},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchLatestImage(),console.log("First Mount")}},{key:"fetchLatestImage",value:function(){var t=Object(m.a)(o.a.mark((function t(){var e,a,n,s,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.get();case 2:for(s in e=t.sent,console.log("Checking API data: ",e),a=[],200===e.status&&(a=e.data),n=a.items[0].cameras)n[s].camera_id===this.state.cameraNo&&(c=new Date(n[s].timestamp).toTimeString(),this.setState({retImage:n[s].image,timeStamp:c}),console.log("Current Image: ",this.state.retImage));this.setState(Object(h.a)({},this.state));case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"filterImages",value:function(t){t.preventDefault();var e=t.target.value;console.log(e),this.setState(Object(h.a)(Object(h.a)({},this.state),{},{cameraNo:e})),this.fetchLatestImage()}},{key:"render",value:function(){return console.log("In Render",this.state.retImage,this.state.timeStamp),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"CausewayCam"}),Object(f.jsx)("div",{children:Object(f.jsx)("form",{children:Object(f.jsxs)("select",{onChange:this.filterImages,children:[Object(f.jsx)("option",{value:"2702",children:"Woodlands Checkpoint"}),Object(f.jsx)("option",{value:"2701",children:"Causeway Camera"}),Object(f.jsx)("option",{value:"2704",children:"BKE Toward Checkpoint"})]})})}),Object(f.jsx)("hr",{}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"timestamp",children:["Time taken: ",this.state.timeStamp]}),Object(f.jsx)("img",{src:this.state.retImage,alt:"",height:"540",width:"960"})]})]})}}]),a}(s.a.Component),v=O,I=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,51)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),s(t),c(t),i(t)}))};i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(v,{})}),document.getElementById("root")),I()}},[[50,1,2]]]);
//# sourceMappingURL=main.610947c4.chunk.js.map